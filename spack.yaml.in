# This is a Spack Environment file.
#
# It describes a set of packages to be installed, along with
# configuration settings.
spack:
  definitions:
  - compilers: [gcc@14]

  concretizer:
    unify: true
#    reuse: false
#    static_analysis: false

  packages:
    all:
      require:
        - target=%%SPACK_TARGET%%

  # add package specs to the `specs` list
  specs:
  - $compilers
  - cmake@4
  - pdi~fortran
  - pdiplugin-decl-hdf5
  - pdiplugin-mpi
  - pdiplugin-pycall
  - pdiplugin-user-code
  - pdiplugin-trace
  - pdiplugin-set-value
  - kokkos
  - python
  - py-dask
  - py-distributed
  - py-bokeh
  - py-matplotlib

  view: true

  mirrors:
    numpex-buildcache:
      url: oci://ghcr.io/benoitmartin88/spack-numpex-stack
      binary: true
      signed: false
      access_pair:
        id_variable: GITHUB_USER
        secret_variable: GITHUB_TOKEN
#  config:
#    install_tree:
#      padded_length: 512